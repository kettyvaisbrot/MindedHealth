{% extends 'base.html' %}

{% block title %}Home - MindedHealth{% endblock %}

{% block extra_css %}
<style>
    .welcome-container {
        text-align: center;
        margin-top: 100px;
    }

    .welcome-container h2 {
        font-size: 28px;
        margin-bottom: 20px;
    }

    .welcome-container p {
        font-size: 18px;
        margin-bottom: 30px;
    }

    .welcome-container .action-buttons {
        display: flex;
        flex-direction: column;
        gap: 15px;
        align-items: center;
        justify-content: center;
    }

    .welcome-container .action-buttons button {
        background-color: #007bff;
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
        min-width: 200px;
    }

    .welcome-container .action-buttons button:hover {
        background-color: #0056b3;
    }

    /* Search form styling */
    .search-container {
        margin-top: 10px;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    {% if user.is_authenticated and user.role == 'patient' %}
        <div class="welcome-container">
            <h2>Welcome, {{ user.username }}!</h2>
            <p>What would you like to do today?</p>
            <div class="action-buttons">
                <a href="{% url 'dashboard:dashboard_home' %}"><button>Document</button></a>
                <a href="{% url 'insights:ai_insight_page' %}"><button>See Insights</button></a>
                <a href="{% url 'medications:medications_page' %}"><button>Manage Medications</button></a>
                <button onclick="toggleSearchForm()">What interests you?</button>
            </div>

            <div id="search-form" style="display:none;" class="search-container">
                <form action="{% url 'what_interested_you:search' %}" method="get">
                    <input type="text" name="q" placeholder="Search mental health topics" required>
                    <button type="submit">Search</button>
                </form>
            </div>
        </div>

        <script>
            function toggleSearchForm() {
                var searchForm = document.getElementById('search-form');
                if (searchForm.style.display === 'none' || searchForm.style.display === '') {
                    searchForm.style.display = 'block';
                } else {
                    searchForm.style.display = 'none'; 
                }
            }
        </script>
    {% else %}
        <p class="welcome-text">
            Welcome to <strong>MindedHealth</strong>, a safe and supportive space where you can
            track your mental well-being, gain valuable insights, and take small steps toward a
            healthier, more balanced life.<br><br>
            To understand more about our work and how MindedHealth can help you, please
            <a href="{% url 'about_us' %}">click here</a> to visit our About page.
        </p>
    {% endif %}
</div>
{% endblock %}
